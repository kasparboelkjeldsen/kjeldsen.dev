{"version":3,"file":"funTimeWebMurderBlock.vue2.mjs","sources":["../../../../../components/blocks/funTimeWebMurderBlock.vue"],"sourcesContent":["<template>\r\n  <div class=\"prose prose-invert max-w-none\">\r\n    <p class=\"mb-4 text-gray-300\">\r\n      To \"pull the plug,\" You will have to log in with GitHub. <br />I'll\r\n      <strong>only retrieve your public GitHub username</strong> — nothing else.\r\n      Your username will be recorded in the database along with the time you\r\n      pressed the button. This action will be visible to other users in the\r\n      activity log.\r\n    </p>\r\n    <ClientOnly>\r\n      <div v-if=\"username\" class=\"mt-4 text-green-500 font-semibold\">\r\n        ✅ {{ username }}, you’ve already pushed the button!\r\n      </div>\r\n    </ClientOnly>\r\n    <button\r\n      class=\"bg-gray-800 hover:bg-gray-700 text-white px-4 py-2 rounded mt-4\"\r\n      @click=\"loginWithGitHub\"\r\n    >\r\n      {{ username ? \"Really? Again?\" : \"Pull the plug for 30 sec\" }}\r\n    </button>\r\n  </div>\r\n</template>\r\n<script lang=\"ts\" setup>\r\nconst config = useRuntimeConfig();\r\nconst clientId = config.public.murderClient;\r\nconst usernameCookie = useCookie<string | null>(\"pushed-by\");\r\n\r\nconst username = usernameCookie.value;\r\n\r\nfunction loginWithGitHub() {\r\n  const currentPage =\r\n    window.location.origin + window.location.pathname + window.location.search;\r\n  const callbackUrl = `${window.location.origin}/api/github/callback`;\r\n  const githubAuthUrl = `https://github.com/login/oauth/authorize?client_id=${clientId}&redirect_uri=${encodeURIComponent(callbackUrl)}&scope=read:user&state=${encodeURIComponent(currentPage)}`;\r\n  window.location.href = githubAuthUrl;\r\n}\r\n</script>\r\n"],"names":[],"mappings":";;;;;;;;;AAuBA,UAAM,SAAS,iBAAiB;AACf,WAAO,OAAO;AACzB,UAAA,iBAAiB,UAAyB,WAAW;AAE3D,UAAM,WAAW,eAAe;;;;;;;;;"}