{"version":3,"file":"_...slug_.vue2.mjs","sources":["../../../../pages/[...slug].vue"],"sourcesContent":["<template>\r\n  <!-- âœ… Navigation -->\r\n  <header v-if=\"navigation?.properties.links\" class=\"relative z-10 py-6\">\r\n    <nav>\r\n      <ul class=\"flex justify-center gap-8 text-lg font-mono\">\r\n        <li v-for=\"link in navigation.properties.links\" :key=\"link.title!\">\r\n          <a\r\n            :href=\"link.route?.path ?? '/'\"\r\n            class=\"transition-colors duration-200 hover:text-gray-400\"\r\n          >\r\n            {{ link.title }}\r\n        </a>\r\n        </li>\r\n      </ul>\r\n    </nav>\r\n  </header>\r\n\r\n  <!-- âœ… Page content -->\r\n  <main class=\"relative z-10 px-4 pb-24 max-w-4xl mx-auto prose prose-invert\">\r\n    <PagesPageResolverComponent\r\n      v-if=\"data\"\r\n      :data=\"data\"\r\n      class=\"z-10 relative\"\r\n    />\r\n  </main>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { useRoute } from \"vue-router\";\r\nimport { watchEffect } from \"vue\";\r\nimport type {\r\n  SeoCompositionContentResponseModel,\r\n  NavigationCompositionContentResponseModel,\r\n  IApiContentResponseModel,\r\n} from \"~/server/delivery-api\";\r\n\r\n\r\nconst route = useRoute();\r\nconst slug = toValue((route.params.slug as string[]) || []);\r\nconst apiPath = \"/api/content/\" + \"/\" + slug.join(\"/\");\r\n\r\nconst { data } = await useFetch<IApiContentResponseModel>(apiPath, {\r\n  server: true, cache: \"no-cache\"\r\n});\r\n\r\nif (data.value?.properties.cacheKeys) {\r\n  const cacheKeys = data.value.properties.cacheKeys || [];\r\n  const tags = [\"reset\", ...cacheKeys];\r\n  const timestamp = new Date().toISOString();\r\n\r\nconsole.log(`\\nðŸ”¥ [${timestamp}] Cache Miss! These keys were not found: ðŸ”¥\\n`);\r\nconsole.table(\r\n  cacheKeys.map((key, index) => ({\r\n    '#': index + 1,\r\n    'Cache Key': key,\r\n  }))\r\n);\r\n\r\n\r\n  useRouteCache((helper) => {\r\n    helper\r\n      .setMaxAge(3600 * 24)\r\n      .setCacheable()\r\n      .addTags(tags);\r\n  });\r\n}\r\n\r\nconst { data: navigation } =\r\n  await useFetch<NavigationCompositionContentResponseModel>(\r\n    \"/api/content/navigation\",\r\n    { server: true, cache: \"no-cache\" }\r\n  );\r\n\r\nwatchEffect(() => {\r\n  if (data.value) {\r\n    const seo = data.value as SeoCompositionContentResponseModel;\r\n    useHead({\r\n      title: seo.properties.seoTitle ?? data.value?.name,\r\n    });\r\n  }\r\n});\r\n</script>\r\n"],"names":["_withAsyncContext","_a"],"mappings":";;;;;;;;;;;;;;AAqCA,UAAM,QAAQ,SAAS;AACvB,UAAM,OAAO,QAAS,MAAM,OAAO,QAAqB,CAAA,CAAE;AAC1D,UAAM,UAAU,mBAAwB,KAAK,KAAK,GAAG;AAE/C,UAAA,EAAE,KAAK,KAAU,CAAA,QAAA,SAAA,IAAAA,iBAAA,MAAA,SAAmC,SAAS;AAAA,MACjE,QAAQ;AAAA,MAAM,OAAO;AAAA,IAAA,GACvB,aAAC,CAAA;AAEG,SAAA,UAAK,UAAL,mBAAY,WAAW,WAAW;AACpC,YAAM,YAAY,KAAK,MAAM,WAAW,aAAa,CAAC;AACtD,YAAM,OAAO,CAAC,SAAS,GAAG,SAAS;AACnC,YAAM,aAAY,oBAAI,KAAK,GAAE,YAAY;AAE3C,cAAQ,IAAI;AAAA,MAAS,SAAS;AAAA,CAA+C;AACrE,cAAA;AAAA,QACN,UAAU,IAAI,CAAC,KAAK,WAAW;AAAA,UAC7B,KAAK,QAAQ;AAAA,UACb,aAAa;AAAA,QAAA,EACb;AAAA,MACJ;AAGE,oBAAc,CAAC,WAAW;AACxB,eACG,UAAU,OAAO,EAAE,EACnB,aAAa,EACb,QAAQ,IAAI;AAAA,MAAA,CAChB;AAAA,IAAA;AAGG,UAAA,EAAE,MAAM,gBACN,CAAA,QAAA,SAAA,IAAAA,iBAAA,MAAA;AAAA,MACJ;AAAA,MACA,EAAE,QAAQ,MAAM,OAAO,WAAW;AAAA,MACpC;AAAA,IAAA,CAAA;AAEF,gBAAY,MAAM;;AAChB,UAAI,KAAK,OAAO;AACd,cAAM,MAAM,KAAK;AACT,gBAAA;AAAA,UACN,OAAO,IAAI,WAAW,cAAYC,MAAA,KAAK,UAAL,gBAAAA,IAAY;AAAA,QAAA,CAC/C;AAAA,MAAA;AAAA,IACH,CACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}